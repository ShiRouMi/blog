# 数组扁平化
数组的扁平化，就是将一个嵌套多层的数组 array (嵌套可以是任何层数)转换为只有一层的数组。
举个栗子
```js
[1,2,[3,4]] 
// --->
[1,2,3,4]
```

## 递归

```js
// 递归
var arr = [1, [2, [3, 4]]];

function flatten(arr) {
    var result = [];
    for (var i = 0, len = arr.length; i < len; i++) {
        if (Array.isArray(arr[i])) {
            result = result.concat(flatten(arr[i]))
        }
        else {
            result.push(arr[i])
        }
    }
    return result;
}


console.log(flatten(arr))
```

## toString()

如果数组的元素都是数字，那么我们可以考虑使用 toString 方法，(然而这种方法使用的场景却非常有限，如果数组是 [1, '1', 2, '2'] 的话，这种方法就会产生错误的结果)因为：

`[1, [2, [3, 4]]].toString() // "1,2,3,4"`
```js
// toString()
var arr = [1, [2, [3, 4]]];

function flatten(arr) {
    return arr.toString().split(',').map(function(item){
        return +item
    })
}

console.log(flatten(arr))
```
但是如果数组元素都是字符串的话，该方法会更加简单
```js
function flatten(arr) {
    return arr.toString().split(',')
}
```

## reduce

```js
// 方法3
var arr = [1, [2, [3, 4]]];

function flatten(arr) {
    return arr.reduce(function(prev, next){
        return prev.concat(Array.isArray(next) ? flatten(next) : next)
    }, [])
}

console.log(flatten(arr))
```

## 扩展运算符

```js
// 扩展运算符
var arr = [1, [2, [3, 4]]];

function flatten(arr) {

    while (arr.some(item => Array.isArray(item))) {
        arr = [].concat(...arr);
    }

    return arr;
}

console.log(flatten(arr))
```

## 学习参考

[JavaScript专题之数组扁平化](https://github.com/mqyqingfeng/Blog/issues/36)