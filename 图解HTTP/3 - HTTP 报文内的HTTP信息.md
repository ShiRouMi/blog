# HTTP 报文内的 HTTP 信息

## 目录
- 3.1 HTTP 报文
- 3.2 请求报文及响应报文的结构
- 3.3 编码提升传输效率
  - 3.3.1 报文主体和实体主体的差异
  - 3.3.2 压缩传输的内容编码
  - 3.3.3 分割发送的分块传输编码
- 3.4 发送多种数据的多部分对象集合
- 3.5 获取部分内容的范围请求
- 3.6 内容协商返回最合适的内容

## important point
- 用于 HTTP 协议交互的信息被称为 HTTP 报文，HTTP报文本身是由多行（由 CR + LF作换行符）数据构成的字符串文本。
- HTTP 报文大致可分为 「报文首部」 和 「报文主体」 两块。通常，并不一定要有报文主体。
- 首部字段有 通用首部、 请求首部、 响应首部、 实体首部
- HTTP 在传输数据时可以按照「数据原貌」直接传输，也可以在传输过程中「通过编码」提升传输速率。通过在传输时编码，能够有效的处理大量的访问请求，但是编码的工作需要计算机完成，会小号更多的 CPU 资源。
- 「报文主体」和「实体主体」的差异。 「报文」是HTTP通信的基本单位，由8位组字节流组成，通过HTTP通信传输；「实体」作为请求或响应的有效载荷数据（补充项）被传输，其内容由「实体首部」和「实体主体」组成
- 通常，报文主体等于实体主体。只有当传输中进行编码操作时，实体主体的内容发生变化，才导致它和报文主体阐释差异
- 内容编码指明应用在实体内容上的编码格式，并保持实体信息原样压缩。**内容编码后的实体由客户端接收并负责解码**。常用的内容编码有 gzip、 compress、 deflate、 identity
- 分块传输编码： 把实体主体分块的功能（在传输大容量数据时，通过把数据分割成多块，能够让浏览器逐步显示页面）
- 分块传输编码会将实体主体分成多个部分（块），每一块都会用十六进制来标记块的大小。
- 使用分块传输编码的实体主体会**由接收的客户端负责解码，恢复到编码前的实体主体**。
- HTTP协议中的多部分对象集合，发送的一份报文主体内可包含多类型实体。通常在**图片或文本文件**等上传时使用
- 在HTTP 报文中使用多部分对象集合时，需要在首部字段里加上 `Content-type`
- 指定范围发送的请求叫做范围请求。
- 对于多重范围的范围请求，响应会在首部字段 `Content-type` 标明 `multipart/byteranges` 后返回响应报文。
- 内容协商机制是指客户端和服务器端就响应的资源内容进行交涉。内容协商会以 语言、 字符集、 编码方式 等为基准判断响应的资源。
- 内容协商技术 有三种类型： 服务器驱动协商 客户端驱动协商 透明协商